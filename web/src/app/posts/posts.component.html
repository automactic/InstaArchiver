<div class="container">
  <div class="filter">
    <nb-card>
      <nb-card-header>Profile</nb-card-header>
      <nb-card-body>
        <nb-select placeholder="All" size="medium" [selected]="username" (selectedChange)="selectedProfileChanged($event)">
          <nb-option>All</nb-option>
          <nb-option *ngFor="let profile of profileService.profiles" [value]="profile.username">{{ profile.display_name }}</nb-option>
        </nb-select>
      </nb-card-body>
    </nb-card>
  </div>
  <div class="posts">
    <nb-list nbInfiniteList [threshold]="500" (bottomThreshold)="loadNext()">
      <nb-list-item *ngFor="let post of posts; let postIndex=index;">
        <nb-card>
          <div *ngFor="let item of post.items; let itemIndex=index;" class="media">
            <div>
              <img *ngIf="item.type == 'image'" [src]="postService.getMediaPath(post.owner_username, item.filename)">
              <video *ngIf="item.type == 'video'" controls muted [poster]="postService.getPosterPath(post.owner_username, item.thumb_image_filename)">
                <source [src]="postService.getMediaPath(post.owner_username, item.filename)" type="video/mp4">
              </video>
            </div>
            <button nbButton (click)="delete(post, item, postIndex, itemIndex)"><nb-icon icon="trash-2-outline"></nb-icon></button>
          </div>
          <div class="footer">
            <div>
              <div><b>{{ post.owner_username }}</b></div>
              <div>{{ post.creation_time }}</div>
            </div>
          </div>
        </nb-card>
      </nb-list-item>
    </nb-list>
  </div>
</div>