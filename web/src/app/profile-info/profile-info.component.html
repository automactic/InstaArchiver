<div class="container" *ngIf="profile else notFound">
  <nb-card class="post-stats">
    <nb-card-header>Post Stats</nb-card-header>
    <nb-card-body>
      <table [nbTreeGrid]="postCounts" equalColumnsWidth>
        <tr nbTreeGridHeaderRow *nbTreeGridHeaderRowDef="allColumns"></tr>
        <tr nbTreeGridRow *nbTreeGridRowDef="let row; columns: allColumns"></tr>
        <ng-container nbTreeGridColumnDef="Year">
          <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>{{ allColumns[0] }}</th>
          <td nbTreeGridCell *nbTreeGridCellDef="let row"><b>{{ row.data.year }}</b></td>
        </ng-container>
        <ng-container *ngFor="let column of allColumns.slice(1)" [nbTreeGridColumnDef]="column">
          <th nbTreeGridHeaderCell *nbTreeGridHeaderCellDef>{{column}}</th>
          <td nbTreeGridCell *nbTreeGridCellDef="let row">{{ row.data[column] }}</td>
        </ng-container>
      </table>
    </nb-card-body>
    <nb-card-footer>
      <nb-list>
        <nb-list-item>
          <div><b>Total Count</b></div>{{ profile.total_count | number }}
        </nb-list-item>
        <nb-list-item>
          <div><b>Earliest</b></div>{{ profile.first_post_timestamp | date }}
        </nb-list-item>
        <nb-list-item>
          <div><b>Latest</b></div>{{ profile.last_post_timestamp | date }}
        </nb-list-item>
      </nb-list>
    </nb-card-footer>
  </nb-card>
  <nb-card class="task-list">
    <nb-card-header>Tasks</nb-card-header>
    <nb-list *ngIf="tasks$ | async as tasks">
      <nb-list-item *ngFor="let task of tasks.tasks">
        <div>{{ task.id }}</div>
        <div>{{ task.post_count }}</div>
      </nb-list-item>
      <nb-list-item *ngIf="tasks.tasks.length == 0">No Task</nb-list-item>
    </nb-list>
  </nb-card>
  <nb-card>
    <nb-card-header>Biography</nb-card-header>
    <nb-card-body>{{ profile.biography }}</nb-card-body>
  </nb-card>
</div>
<ng-template #notFound>
  <div class="container">
    <nb-card accent="danger" style="width: 100%">
      <nb-card-header>Error</nb-card-header>
      <nb-card-body>
        Profile cannot be found
      </nb-card-body>
    </nb-card>
  </div>
</ng-template>